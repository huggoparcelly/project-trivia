(this["webpackJsonptrivia-test"]=this["webpackJsonptrivia-test"]||[]).push([[0],{136:function(e,t,a){e.exports=a(257)},141:function(e,t,a){},147:function(e,t,a){},156:function(e,t){},158:function(e,t){},169:function(e,t){},171:function(e,t){},198:function(e,t){},200:function(e,t){},201:function(e,t){},206:function(e,t){},208:function(e,t){},214:function(e,t){},216:function(e,t){},235:function(e,t){},247:function(e,t){},250:function(e,t){},253:function(e,t,a){},257:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(49),o=a.n(c),i=(a(141),a(51)),s=a(33),l=a(4),u=(a(147),a(135)),d=a(21),m=a.n(d),p=a(35),h=a(14),v=a(15),f=a(8),g=a(17),b=a(16),y=a(132),k=a.n(y);var O=function(e){var t=k()(e).toString();return"https://www.gravatar.com/avatar/".concat(t)},E=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,[{key:"render",value:function(){var e=JSON.parse(localStorage.getItem("state")).player,t=e.name,a=e.score,n=e.gravatarEmail;return r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement("img",{src:O(n),alt:"your avatar","data-testid":"header-profile-picture"}),r.a.createElement("p",{"data-testid":"header-player-name"},t),r.a.createElement("p",{"data-testid":"header-score"},a)))}}]),a}(n.Component);function S(){return(S=Object(p.a)(m.a.mark((function e(){var t,a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),e.next=3,fetch("https://opentdb.com/api.php?amount=5&token=".concat(t));case 3:return a=e.sent,e.next=6,a.json();case 6:return n=e.sent,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var j=function(){return S.apply(this,arguments)},I=(a(253),function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).saveTriviaOnGlobalState=n.saveTriviaOnGlobalState.bind(Object(f.a)(n)),n.colorButton=n.colorButton.bind(Object(f.a)(n)),n.nextQuestion=n.nextQuestion.bind(Object(f.a)(n)),n.getTimer=n.getTimer.bind(Object(f.a)(n)),n.state={counter:0,showColor:!1,timerIsOver:!1,seconds:30,stopTimer:!1},n}return Object(v.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.saveTriviaOnGlobalState();var t=this.state.stopTimer;setInterval((function(){e.setState((function(e){return{seconds:t?e.seconds:e.seconds-1}})),e.getTimer()}),1e3),this.resetScore()}},{key:"getTimer",value:function(){this.state.seconds<=0&&this.setState({timerIsOver:!0})}},{key:"resetScore",value:function(){var e=JSON.parse(localStorage.getItem("state")).player;e.score=0,e.assertions=0,localStorage.setItem("state",JSON.stringify({player:e}))}},{key:"saveScore",value:function(e){var t=JSON.parse(localStorage.getItem("state")).player;t.score+=e,localStorage.setItem("state",JSON.stringify({player:t}))}},{key:"increaseAssertion",value:function(){var e=JSON.parse(localStorage.getItem("state")).player;e.assertions+=1,localStorage.setItem("state",JSON.stringify({player:e}))}},{key:"saveTriviaOnGlobalState",value:function(){var e=Object(p.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.dispatchTrivia,e.next=3,j();case 3:a=e.sent,t(a);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nextQuestion",value:function(){this.setState((function(e){return{counter:e.counter+1,showColor:!1,timerIsOver:!1,seconds:30}}))}},{key:"nextButton",value:function(){var e=this;return r.a.createElement("button",{type:"button","data-testid":"btn-next",onClick:function(){e.nextQuestion()}},"Pr\xf3xima")}},{key:"colorButton",value:function(){this.setState({showColor:!0,timerIsOver:!0})}},{key:"handleClick",value:function(e,t){this.setState({stopTimer:!0});var a=this.state.seconds;if(e){this.increaseAssertion();var n=0;switch(t){case"hard":n=3;break;case"medium":n=2;break;default:n=1}this.saveScore(10+a*n)}}},{key:"correctQuestion",value:function(e){var t=this.state.showColor;return t&&e?"correct":t&&!1===e?"wrong":"test"}},{key:"renderGame",value:function(){var e=this,t=this.props.triviaQuest,a=this.state,n=a.counter,c=a.seconds,o=a.timerIsOver,i=a.showColor,s=t[n]?t[n]:{category:"Carregando",question:"Carregando",correct_answer:"Carregando",incorrect_answers:["Carregand"]},l=s.category,d=s.question,m=s.incorrect_answers,p=s.correct_answer,h=[].concat(Object(u.a)(m),[p]);return r.a.createElement("div",null,r.a.createElement(E,null),r.a.createElement("h1",null,"JOGO AQUI"),r.a.createElement("p",{"data-testid":"question-category"},l),r.a.createElement("p",{"data-testid":"question-text"},d.toString()),h.sort().map((function(t,a){return r.a.createElement("button",{disabled:o,className:e.correctQuestion(t===p),type:"button",key:a,"data-testid":t===p?"correct-answer":"wrong-answer-".concat(a),onClick:function(){e.colorButton(),e.handleClick(t===p,s.difficulty)}},t)})),r.a.createElement("p",null,c>0?c:0),i||o?this.nextButton():null)}},{key:"render",value:function(){return this.state.counter>=5?r.a.createElement(l.a,{to:"/feedback"}):r.a.createElement("div",null,this.renderGame())}}]),a}(n.Component)),w=Object(i.b)((function(e){return{triviaQuest:e.trivia.results}}),(function(e){return{dispatchTrivia:function(t){return e(function(e){return{type:"RECEIVE_TRIVIA",state:e}}(t))}}}))(I),C=a(50);function x(){return(x=Object(p.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://opentdb.com/api_token.php?command=request");case 3:return t=e.sent,e.next=6,t.json().then((function(e){return localStorage.setItem("token",e.token)}));case 6:a=e.sent,localStorage.setItem("token",a.token),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}var N=function(){return x.apply(this,arguments)},J=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).handleChange=n.handleChange.bind(Object(f.a)(n)),n.checkInput=n.checkInput.bind(Object(f.a)(n)),n.fetchAndRedirect=n.fetchAndRedirect.bind(Object(f.a)(n)),n.state={name:"",email:"",shouldRedirect:!1},n}return Object(v.a)(a,[{key:"settingsButton",value:function(){window.location.href="/configuracoes"}},{key:"fetchAndRedirect",value:function(){N()&&this.setState({shouldRedirect:!0})}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;if(this.setState(Object(C.a)({},a,n)),null===localStorage.getItem("state")){localStorage.setItem("state",JSON.stringify({player:{name:"",assertions:0,score:0,gravatarEmail:""}}))}var r=JSON.parse(localStorage.getItem("state")).player;"email"===a&&(r.gravatarEmail=n),"name"===a&&(r.name=n),localStorage.setItem("state",JSON.stringify({player:r}))}},{key:"checkInput",value:function(){var e=this.state,t=e.name;return!(e.email.match(/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/)&&t.length>2)}},{key:"render",value:function(){var e=this;return this.state.shouldRedirect?r.a.createElement(l.a,{to:"/jogo"}):r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"input-text"},r.a.createElement("input",{type:"text",name:"name",className:"input-field",placeholder:"Name",onChange:this.handleChange,"data-testid":"input-player-name"})),r.a.createElement("label",{htmlFor:"input-email"},r.a.createElement("input",{type:"text",name:"email",placeholder:"Email",onChange:this.handleChange,"data-testid":"input-gravatar-email"})),r.a.createElement("button",{type:"button","data-testid":"btn-play",disabled:this.checkInput(),onClick:function(){return e.fetchAndRedirect()}},"Jogar"),r.a.createElement("button",{type:"button",className:"btn-field","data-testid":"btn-settings",onClick:function(){return e.settingsButton()}},"Configura\xe7\xf5es"))}}]),a}(n.Component),R=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",{"data-testid":"settings-title"},"CONFIGURA\xc7\xd5ES"))}}]),a}(n.Component),A=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).renderPlayAgain=n.renderPlayAgain.bind(Object(f.a)(n)),n.state={playAgain:!1},n}return Object(v.a)(a,[{key:"feedbackMessage",value:function(){var e=JSON.parse(localStorage.getItem("state")).player,t=e.assertions,a=e.score;return r.a.createElement("div",null,r.a.createElement("p",{"data-testid":"feedback-text"},t<3?"Podia ser melhor...":"Mandou bem!"),r.a.createElement("p",{"data-testid":"feedback-total-score"},a),r.a.createElement("p",{"data-testid":"feedback-total-question"},t),r.a.createElement("button",{type:"button","data-testid":"btn-ranking",onClick:this.renderRanking},"Ver Ranking"))}},{key:"renderRanking",value:function(){window.location.href="/ranking"}},{key:"renderPlayAgain",value:function(){this.setState({playAgain:!0})}},{key:"render",value:function(){return this.state.playAgain?r.a.createElement(l.a,{to:"/"}):r.a.createElement("div",null,r.a.createElement(E,null),this.feedbackMessage(),r.a.createElement("button",{type:"button",onClick:this.renderPlayAgain,"data-testid":"btn-play-again"},"Jogar Novamente"))}}]),a}(n.Component),P=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).getPlayers=n.getPlayers.bind(Object(f.a)(n)),n.state={allPlayers:[]},n}return Object(v.a)(a,[{key:"componentDidMount",value:function(){this.savePlayerInRanking(),this.getPlayers()}},{key:"getPlayers",value:function(){var e=JSON.parse(localStorage.getItem("ranking"));this.setState({allPlayers:e})}},{key:"savePlayerInRanking",value:function(){var e=JSON.parse(localStorage.getItem("state")).player;null===localStorage.getItem("ranking")&&localStorage.setItem("ranking",JSON.stringify([]));var t=JSON.parse(localStorage.getItem("ranking")),a={name:e.name,score:e.score,picture:O(e.gravatarEmail)};t.push(a),localStorage.setItem("ranking",JSON.stringify(t))}},{key:"renderInitialPage",value:function(){window.location.href="/"}},{key:"render",value:function(){var e=this.state.allPlayers;return r.a.createElement("div",null,r.a.createElement("p",{"data-testid":"ranking-title"},"Ranking"),r.a.createElement("ul",null,e.sort((function(e,t){return t.score-e.score})).map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("img",{src:e.picture,alt:"your avatar"}),r.a.createElement("p",{"data-testid":"player-name-".concat(t)},e.name),r.a.createElement("p",{"data-testid":"player-score-".concat(t)},e.score))}))),r.a.createElement("button",{type:"button","data-testid":"btn-go-home",onClick:this.renderInitialPage},"Inicio"))}}]),a}(n.Component);function T(){return r.a.createElement("div",{className:"App"},r.a.createElement(l.d,null,r.a.createElement(l.b,{exact:!0,path:"/",component:J}),r.a.createElement(l.b,{exact:!0,path:"/jogo",component:w}),r.a.createElement(l.b,{exact:!0,path:"/configuracoes",component:R}),r.a.createElement(l.b,{exact:!0,path:"/feedback",component:A}),r.a.createElement(l.b,{exact:!0,path:"/ranking",component:P})))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var _=a(36),B=a(133),G=a(134),Q=a(37),q={user:{email:"",name:""}};var M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return Object(Q.a)(Object(Q.a)({},e),{},{user:t.state});default:return e}},z={results:[{category:"Carregando",question:"Carregando",correct_answer:"Carregando",incorrect_answers:["Carregand"]}]};var V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVE_TRIVIA":return Object(Q.a)(Object(Q.a)({},e),{},{results:t.state.results});default:return e}},D={timerIsOver:!1};var F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TIMER":return{timerIsOver:t.state};default:return e}},W=Object(_.combineReducers)({loginReducer:M,trivia:V,timer:F}),U=Object(_.createStore)(W,Object(B.composeWithDevTools)(Object(_.applyMiddleware)(G.a)));o.a.render(r.a.createElement(s.a,null,r.a.createElement(i.a,{store:U},r.a.createElement(T,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[136,1,2]]]);
//# sourceMappingURL=main.62bb2300.chunk.js.map